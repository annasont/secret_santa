{% extends "draw/base.html" %}
{% load crispy_forms_tags %}
{% block content %}
    <div class="container pt-5">
        <div class="jumbotron">
            <h1 class="display-4">Komu zrobić prezent?</h1>
            <p class="lead">Przeprowadź losowanie "secret santa": Wpisz imiona osób, które biorą udział w losowaniu, oraz ich adresy e-mail. Każdy z uczestników otrzyma maila z imieniem wylosowanej osoby, której będzie robić prezent.</p>
        </div>
        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }}">{{ message }}</div>
            {% endfor %}
        {% endif %}
        
        <p>{{ pairs }}</p>
        <p>{{ x }}</p>
     
        <form id="namesAndEmails" class="row g-3" method="POST">
            {{ formset.management_form|crispy }}
            {% csrf_token %}
            <fieldset class="form-group">
                {% for form in formset %}
                    <div class="row">
                        <div class="form-group col-sm-1 mb-3">
                            <label class="col-form-label">{{ forloop.counter }}.</label>
                        </div>
                        <div class="form-group col-sm-4 mb-3">
                            {{ form.name }}
                        </div>
                        <div class="form-group col-sm-7 mb-3">
                            {{ form.email }}
                        </div>
                    </div> 
                {% endfor %}
            </fieldset>
            <div class="row mt-3">
                <button type="submit" class="btn btn-primary mb-3" name="addSubtractOrDraw" value="add">+ Dodaj kolejną osobę</button>
                <button type="submit" class="btn btn-primary mb-3" name="addSubtractOrDraw" value="subtract" >– Usuń ostatni rząd</button>
                <button type="submit" class="btn btn-warning" name="addSubtractOrDraw" value="draw">Losuj</button>
            </div> 
        </form> 
    </div>
{% endblock content %}